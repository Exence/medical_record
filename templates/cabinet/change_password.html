{% extends 'base.html' %}

{% block title %}
	<title>Смена пароля</title>
{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Смена пароля</h2>
  {% if error %}
    <div class="alert alert-danger col-4" role="alert">
      {{ error }}
    </div>
  {% endif %}
  <form action="/users/change_password" method="POST">
    <div class="form-group">
      <label for="current_password">Текущий пароль</label>
      <input type="password" class="form-control" id="current_password" name="current_password" required>
  </div>

  <div class="form-group">
      <label for="new_password">Новый пароль</label>
      <input type="password" class="form-control" id="new_password" name="new_password" required>
  </div>

  <div class="form-group">
      <label for="confirm_password">Подтверждение нового пароля</label>
      <input type="password" class="form-control" id="confirm_password" name="confirm_password" required oninput="check_pass_match(this)"> 
  </div>

  <button type="submit" class="btn btn-primary mt-3">Сменить пароль</button>
  <a href="/users/cabinet" class="btn btn-secondary mt-3">Отмена</a>
  </form>
</div>

<script>
  function check_pass_match(input) {
      if (input.value !== document.getElementById('new_password').value) {
          input.setCustomValidity('Пароли должны совпадать');
      } else {
          input.setCustomValidity('');
      }
  }
  </script>
{% endblock %}